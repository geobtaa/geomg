<%- @page_title = "GEOMG - Elements" %>

<h1 style="width:100%;">
  Elements
  <%= link_to '+ New Element', new_element_path, { class: 'btn btn-primary float-right' } %>
</h1>

<h6>
  <span class='float-left mt-3'>
    <%== pagy_info(@pagy, 'elements'.pluralize(@pagy.count)) %>
  </span>
  <span class='float-right'>
    <%== pagy_bootstrap_nav(@pagy) %>
  </span>
</h6>

<table class="table table-striped table-bordered sortable">
  <thead>
    <tr>
      <th>Label</th>
      <th>Solr field</th>
      <th>Field definition</th>
      <th>Field type</th>
      <th>Required</th>
      <th>Repeatable</th>
      <th>Reorder</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @elements.each do |element| %>
      <tr data-id="<%=element.id%>">
        <td><%= link_to element.label, element %></td>
        <td><%= element.solr_field %></td>
        <td><%= element.field_definition.present? ? link_to( element.field_definition, element.field_definition) : '' %></td>
        <td><%= element.field_type %></td>
        <td><%= element.required %></td>
        <td><%= element.repeatable %></td>
        <td class="handle" style="text-align:center">&varr;</td>
        <td><%= link_to 'Show', element %></td>
        <td><%= link_to 'Edit', edit_element_path(element) %></td>
        <td><%= link_to 'Destroy', element, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>

<h6>
  <span class='float-left mt-3'>
    <%== pagy_info(@pagy, 'elements'.pluralize(@pagy.count)) %>
  </span>
  <span class='float-right'>
    <%== pagy_bootstrap_nav(@pagy) %>
  </span>
</h6>

<br/>

<script>
  GEOMG.SortElements(
    $("tbody"),
    "<%= sort_elements_path %>"
  );
</script>
